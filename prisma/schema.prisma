generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id          String        @id @default(cuid())
  email       String        @unique
  name        String?
  password    String
  role        Role          @default(MEMBER)
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
  disposisi   Disposisi[]
  suratKeluar SuratKeluar[]
  suratMasuk  SuratMasuk[]

  @@map("users")
}

model SuratMasuk {
  id               String        @id @default(cuid())
  noUrut           Int           @unique
  nomorSurat       String        @unique
  tanggalSurat     DateTime
  tanggalDiteruskan DateTime
  asalSurat        String
  perihal          String
  keterangan       String?
  filePath         String?
  createdAt        DateTime      @default(now())
  updatedAt        DateTime      @updatedAt
  createdById      String
  disposisi        Disposisi[]
  suratKeluar      SuratKeluar[]
  createdBy        User          @relation(fields: [createdById], references: [id])

  @@map("surat_masuk")
}

model Disposisi {
  id               String          @id @default(cuid())
  nomorDisposisi   String?         @unique
  noUrut           Int
  tanggalDisposisi DateTime
  tujuanDisposisi  String
  isiDisposisi     String
  keterangan       String?
  status           StatusDisposisi @default(SELESAI)
  createdAt        DateTime        @default(now())
  updatedAt        DateTime        @updatedAt
  suratMasukId     String
  createdById      String
  createdBy        User            @relation(fields: [createdById], references: [id])
  suratMasuk       SuratMasuk      @relation(fields: [suratMasukId], references: [id], onDelete: Cascade)

  @@map("disposisi")
}

model SuratKeluar {
  id           String        @id @default(cuid())
  noUrut       Int           @unique
  klas         String
  pengolah     PengolahSurat
  tanggalSurat DateTime
  perihalSurat String
  kirimKepada  String
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
  suratMasukId String?
  createdById  String
  createdBy    User          @relation(fields: [createdById], references: [id])
  suratMasuk   SuratMasuk?   @relation(fields: [suratMasukId], references: [id])

  @@map("surat_keluar")
}

enum Role {
  ADMIN
  MEMBER
}

enum StatusDisposisi {
  SELESAI
}

enum PengolahSurat {
  KETUA_DPRD
  WAKIL_KETUA_1
  WAKIL_KETUA_2
  WAKIL_KETUA_3
  SEKWAN
}
